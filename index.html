<!DOCTYPE html>
<html>
<head>
    <title>Change the colors</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Change the colors</h1>
<input id="hex" type="text" value="rgb2" placeholder="hex ff0000">

<select name="modes" id="modes">
	<option value="rgb2">rgb2</option>
	<option value="rgb">rgb</option>
	<option value="blue">blue</option>
	<option value="green">green</option>
	<option value="red">red</option>
	<option value="off">off</option>
</select>

<button id="apply">Apply</button>
<button class="btn red" onclick="document.getElementById('hex').value = 'red'"></button>
<button class="btn green" onclick="document.getElementById('hex').value = 'green'"></button>
<button class="btn blue" onclick="document.getElementById('hex').value = 'blue'"></button>
<button class="btn yellow" onclick="document.getElementById('hex').value = 'yellow'"></button>
<button class="btn orange" onclick="document.getElementById('hex').value = 'orange'"></button>
<button class="btn purple" onclick="document.getElementById('hex').value = 'purple'"></button>
<button class="btn" onclick="document.getElementById('hex').value = 'white'"></button>

<label class="switch">
  <input id="switch" type="checkbox">
  <span class="slider round"></span>
</label>

<pre id="output"></pre>

<script>
document.getElementById("apply").addEventListener("click", () => {
    on()
});

document.getElementById("switch").addEventListener("click", () => {
	if (!document.getElementById('switch').checked) {
       fetch(`/off`)
	}
	else {
on()
	}
});

document.getElementById("apply").addEventListener("click", () => {
    on()
});

function on() {
	document.getElementById("switch").checked = true;
    const hex = document.getElementById("hex").value;
    fetch(`/run?hex=${encodeURIComponent(hex)}`)
        .then(res => res.text())
        .then(output => document.getElementById("output").innerText = output)
        .catch(console.error);

}

</script>

</body>
</html>

